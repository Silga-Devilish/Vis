<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV 数据分析与可视化</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>CSV 数据分析与可视化</h1>

        <form id="uploadForm" enctype="multipart/form-data">
            <label for="file">选择 CSV 数据文件:</label>
            <input type="file" id="file" name="file" accept=".csv" required>

            <label for="question">输入分析需求:</label>
            <textarea id="question" name="question"
                      placeholder="例如：显示各区域销售额对比柱状图，或分析2020-2022年销售趋势"
                      required></textarea>

            <button type="submit">生成可视化分析</button>
        </form>

        <div id="answer"></div>

        <div class="history-panel">
            <h3>📁 历史记录</h3>
            <button id="showHistoryBtn">显示历史图表</button>
            <button id="hideHistoryBtn" style="display:none; margin-left:10px;">隐藏历史记录</button>
            <div id="historyContainer" style="display:none;"></div>
        </div>

        <div id="debugPanel" class="debug-panel">
            <h3>调试信息</h3>
            <pre id="debugInfo"></pre>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
